<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‡§Ö‡§Ç‡§ú‡§≤‡•Ä ‚Äî Admin Panel</title>

<style>
body{margin:0;background:#111;color:#eee;font-family:system-ui}
.panel{max-width:600px;margin:20px auto;background:#1e1e26;padding:18px;border-radius:18px}
h2{color:#ffb3b3}
textarea,input{width:100%;margin-top:8px;padding:10px;border-radius:10px;border:1px solid #333;background:#121212;color:#fff}
button{margin-top:10px;padding:12px;border:none;border-radius:12px;background:#ffb3b3;color:#111;cursor:pointer}
.hidden{display:none}
.msg{font-size:13px;margin-top:6px}
</style>
</head>

<body>

<div class="panel">
<h2>üß† Single Learning</h2>

<textarea id="q">‡§™‡•ç‡§∞‡§∂‡•ç‡§®</textarea>
<textarea id="a">‡§â‡§§‡•ç‡§§‡§∞</textarea>
<input id="t" placeholder="‡§ü‡•à‡§ó (‡§ï‡•â‡§Æ‡§æ ‡§∏‡•á ‡§Ö‡§≤‡§ó)">

<button onclick="saveSingle()">‡§∏‡•á‡§µ ‡§ï‡§∞‡•á‡§Ç</button>
<div id="msg1" class="msg"></div>
</div>

<div class="panel">
<h2>üì¶ Bulk Learning (100+)</h2>

<textarea id="bulk"
placeholder="Q: ‡§™‡•ç‡§∞‡§∂‡•ç‡§®
A: ‡§â‡§§‡•ç‡§§‡§∞
TAGS: ‡§ü‡•à‡§ó1, ‡§ü‡•à‡§ó2

(‡§π‡§∞ ‡§¨‡•ç‡§≤‡•â‡§ï ‡§ï‡•á ‡§¨‡•Ä‡§ö ‡§ñ‡§æ‡§≤‡•Ä ‡§≤‡§æ‡§á‡§®)">
</textarea>

<button onclick="saveBulk()">Bulk ‡§∏‡•á‡§µ ‡§ï‡§∞‡•á‡§Ç</button>
<div id="msg2" class="msg"></div>
</div>

<!-- Scripts (‡§ï‡•ç‡§∞‡§Æ ‡§¨‡§π‡•Å‡§§ ‡§Æ‡§π‡§§‡•ç‡§µ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§π‡•à) -->
<script src="learning/KnowledgeBase.js"></script>

<script>
async function saveSingle(){
  const msg=document.getElementById("msg1");
  try{
    await KnowledgeBase.init();
    await KnowledgeBase.saveOne({
      question:q.value.trim(),
      answer:a.value.trim(),
      tags:t.value.split(",").map(x=>x.trim()).filter(Boolean)
    });
    msg.style.color="#9fdf9f";
    msg.textContent="‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§∏‡•á‡§µ ‡§π‡•Å‡§Ü";
  }catch(e){
    msg.style.color="#ff9f9f";
    msg.textContent="‡§∏‡•á‡§µ ‡§®‡§π‡•Ä‡§Ç ‡§π‡•Å‡§Ü";
  }
}

async function saveBulk(){
  const msg=document.getElementById("msg2");
  try{
    await KnowledgeBase.init();
    const blocks=bulk.value.split(/\n\s*\n/);
    let count=0;
    for(const b of blocks){
      const q=b.match(/Q:\s*(.+)/i);
      const a=b.match(/A:\s*(.+)/i);
      if(q && a){
        await KnowledgeBase.saveOne({
          question:q[1],
          answer:a[1],
          tags:[]
        });
        count++;
      }
    }
    msg.style.color="#9fdf9f";
    msg.textContent=`${count} ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§∏‡•á‡§µ ‡§π‡•Å‡§è`;
  }catch(e){
    msg.style.color="#ff9f9f";
    msg.textContent="Bulk ‡§∏‡•á‡§µ ‡§µ‡§ø‡§´‡§≤";
  }
}
</script>

</body>
</html>
