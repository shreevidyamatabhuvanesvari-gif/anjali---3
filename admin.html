<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‡§Ö‡§Ç‡§ú‡§≤‡•Ä ‚Äî Admin Panel</title>

<style>
body{
  margin:0;
  background:#111;
  color:#eee;
  font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Noto Sans Devanagari",Arial;
}

.panel{
  max-width:720px;
  margin:20px auto;
  background:#1e1e26;
  padding:18px;
  border-radius:18px;
}

h2{color:#ffb3b3;margin-top:0}

textarea,input{
  width:100%;
  margin-top:8px;
  padding:12px;
  border-radius:10px;
  border:1px solid #333;
  background:#121212;
  color:#fff;
  font-size:14px;
}

textarea.bulk{
  min-height:360px;   /* üî• ‡§¨‡§°‡§º‡§æ Bulk Box */
  line-height:1.5;
}

button{
  margin-top:12px;
  padding:12px 16px;
  border:none;
  border-radius:12px;
  background:#ffb3b3;
  color:#111;
  cursor:pointer;
  font-size:14px;
}

.msg{
  font-size:13px;
  margin-top:6px;
}
</style>
</head>

<body>

<!-- ================= SINGLE LEARNING ================= -->
<div class="panel">
<h2>üß† Single Learning (‡§è‡§ï ‡§™‡•ç‡§∞‡§∂‡•ç‡§®)</h2>

<textarea id="q" placeholder="‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§≤‡§ø‡§ñ‡•á‡§Ç"></textarea>
<textarea id="a" placeholder="‡§â‡§§‡•ç‡§§‡§∞ ‡§≤‡§ø‡§ñ‡•á‡§Ç"></textarea>
<input id="t" placeholder="‡§ü‡•à‡§ó (‡§ï‡•â‡§Æ‡§æ ‡§∏‡•á ‡§Ö‡§≤‡§ó ‡§ï‡§∞‡•á‡§Ç)">

<button onclick="saveSingle()">‡§∏‡•á‡§µ ‡§ï‡§∞‡•á‡§Ç</button>
<div id="msg1" class="msg"></div>
</div>

<!-- ================= BULK LEARNING ================= -->
<div class="panel">
<h2>üì¶ Bulk Learning (100+ / 1000+)</h2>

<textarea id="bulk" class="bulk"
placeholder="Q: ‡§™‡•ç‡§∞‡§∂‡•ç‡§®?
A: ‡§â‡§§‡•ç‡§§‡§∞
TAGS: ‡§ü‡•à‡§ó1, ‡§ü‡•à‡§ó2

Q: ‡§¶‡•Ç‡§∏‡§∞‡§æ ‡§™‡•ç‡§∞‡§∂‡•ç‡§®?
A: ‡§¶‡•Ç‡§∏‡§∞‡§æ ‡§â‡§§‡•ç‡§§‡§∞

(‡§π‡§∞ ‡§™‡•ç‡§∞‡§∂‡•ç‡§®‚Äì‡§â‡§§‡•ç‡§§‡§∞ ‡§¨‡•ç‡§≤‡•â‡§ï ‡§ï‡•á ‡§¨‡•Ä‡§ö ‡§è‡§ï ‡§ñ‡§æ‡§≤‡•Ä ‡§≤‡§æ‡§á‡§® ‡§∞‡§ñ‡•á‡§Ç)">
</textarea>

<button onclick="saveBulk()">Bulk ‡§∏‡•á‡§µ ‡§ï‡§∞‡•á‡§Ç</button>
<div id="msg2" class="msg"></div>
</div>

<!-- ===================================================
     SCRIPT SECTION (ORDER IS FINAL & FUTURE-SAFE)
     =================================================== -->

<!-- Core -->
<script src="core/AnjaliCore.js"></script>

<!-- Storage / Learning -->
<script src="learning/KnowledgeBase.js"></script>
<script src="learning/ExperienceMemory.js"></script>

<!-- Bridge / Control (Future use) -->
<script src="core/LearningBridge.js"></script>
<script src="core/AdminControl.js"></script>

<!-- Admin Tools (Future expansion) -->
<script src="admin/admin_learning_view.js"></script>
<script src="admin/admin_bulk_loader.js"></script>

<!-- Voice (No calls from Admin, but loaded safely) -->
<script src="voice/tts.js"></script>
<script src="voice/stt.js"></script>

<!-- ================= SAVE LOGIC ================= -->
<script>
async function saveSingle(){
  const msg=document.getElementById("msg1");
  try{
    await KnowledgeBase.init();
    await KnowledgeBase.saveOne({
      question:q.value.trim(),
      answer:a.value.trim(),
      tags:t.value.split(",").map(x=>x.trim()).filter(Boolean)
    });
    msg.style.color="#9fdf9f";
    msg.textContent="‚úîÔ∏è ‡§™‡•ç‡§∞‡§∂‡•ç‡§®‚Äì‡§â‡§§‡•ç‡§§‡§∞ ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§∏‡•á‡§µ ‡§π‡•Å‡§Ü";
    q.value=""; a.value=""; t.value="";
  }catch(e){
    msg.style.color="#ff9f9f";
    msg.textContent="‚ùå ‡§∏‡•á‡§µ ‡§®‡§π‡•Ä‡§Ç ‡§π‡•Å‡§Ü";
  }
}

async function saveBulk(){
  const msg=document.getElementById("msg2");
  try{
    await KnowledgeBase.init();
    const blocks=bulk.value.split(/\n\s*\n/);
    let count=0;

    for(const b of blocks){
      const q=b.match(/Q:\s*(.+)/i);
      const a=b.match(/A:\s*(.+)/i);
      const t=b.match(/TAGS:\s*(.+)/i);
      if(q && a){
        await KnowledgeBase.saveOne({
          question:q[1].trim(),
          answer:a[1].trim(),
          tags: t ? t[1].split(",").map(x=>x.trim()) : []
        });
        count++;
      }
    }
    msg.style.color="#9fdf9f";
    msg.textContent=`‚úîÔ∏è ${count} ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§∏‡•á‡§µ ‡§π‡•Å‡§è`;
  }catch(e){
    msg.style.color="#ff9f9f";
    msg.textContent="‚ùå Bulk ‡§∏‡•á‡§µ ‡§µ‡§ø‡§´‡§≤";
  }
}
</script>

</body>
</html>
