<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>рдЕрдВрдЬрд▓реА тАФ Admin Panel</title>

<style>
body{
  margin:0;
  background:#111;
  color:#eee;
  font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Noto Sans Devanagari",Arial;
}

.panel{
  max-width:720px;
  margin:20px auto;
  background:#1e1e26;
  padding:18px;
  border-radius:18px;
}

h2{color:#ffb3b3;margin-top:0}

textarea,input{
  width:100%;
  margin-top:8px;
  padding:12px;
  border-radius:10px;
  border:1px solid #333;
  background:#121212;
  color:#fff;
  font-size:14px;
}

textarea.bulk{
  min-height:360px;   /* ЁЯФе рдмрдбрд╝рд╛ Bulk Box */
  line-height:1.5;
}

button{
  margin-top:12px;
  padding:12px 16px;
  border:none;
  border-radius:12px;
  background:#ffb3b3;
  color:#111;
  cursor:pointer;
  font-size:14px;
}

.msg{
  font-size:13px;
  margin-top:6px;
}
</style>
</head>

<body>

<!-- ================= SINGLE LEARNING ================= -->
<div class="panel">
<h2>ЁЯза Single Learning (рдПрдХ рдкреНрд░рд╢реНрди)</h2>

<textarea id="q" placeholder="рдкреНрд░рд╢реНрди рд▓рд┐рдЦреЗрдВ"></textarea>
<textarea id="a" placeholder="рдЙрддреНрддрд░ рд▓рд┐рдЦреЗрдВ"></textarea>
<input id="t" placeholder="рдЯреИрдЧ (рдХреЙрдорд╛ рд╕реЗ рдЕрд▓рдЧ рдХрд░реЗрдВ)">

<button onclick="saveSingle()">рд╕реЗрд╡ рдХрд░реЗрдВ</button>
<div id="msg1" class="msg"></div>
</div>

<!-- ================= BULK LEARNING ================= -->
<div class="panel">
<h2>ЁЯУж Bulk Learning (100+ / 1000+)</h2>

<textarea id="bulk" class="bulk"
placeholder="Q: рдкреНрд░рд╢реНрди?
A: рдЙрддреНрддрд░
TAGS: рдЯреИрдЧ1, рдЯреИрдЧ2

Q: рджреВрд╕рд░рд╛ рдкреНрд░рд╢реНрди?
A: рджреВрд╕рд░рд╛ рдЙрддреНрддрд░

(рд╣рд░ рдкреНрд░рд╢реНрдитАУрдЙрддреНрддрд░ рдмреНрд▓реЙрдХ рдХреЗ рдмреАрдЪ рдПрдХ рдЦрд╛рд▓реА рд▓рд╛рдЗрди рд░рдЦреЗрдВ)">
</textarea>

<button onclick="saveBulk()">Bulk рд╕реЗрд╡ рдХрд░реЗрдВ</button>
<div id="msg2" class="msg"></div>
</div>
  <button class="btn secondary" id="viewLearnBtn">рд╕реАрдЦрд╛ рд╣реБрдЖ рджреЗрдЦреЗрдВ</button>

<!-- ===================================================
     SCRIPT SECTION (ORDER IS FINAL & FUTURE-SAFE)
     =================================================== -->

<!-- Core -->
<script src="core/AnjaliCore.js"></script>

<!-- Storage / Learning -->
<script src="learning/KnowledgeBase.js"></script>
<script src="learning/ExperienceMemory.js"></script>

<!-- Bridge / Control (Future use) -->
<script src="core/LearningBridge.js"></script>
<script src="core/AdminControl.js"></script>

<!-- Admin Tools (Future expansion) -->
<script src="admin/admin_learning_view.js"></script>
<script src="admin/admin_bulk_loader.js"></script>

<!-- Voice (No calls from Admin, but loaded safely) -->
<script src="voice/tts.js"></script>
<script src="voice/stt.js"></script>

<!-- ================= SAVE LOGIC ================= -->
<script>
async function saveSingle(){
  const msg=document.getElementById("msg1");
  try{
    await KnowledgeBase.init();
    await KnowledgeBase.saveOne({
      question:q.value.trim(),
      answer:a.value.trim(),
      tags:t.value.split(",").map(x=>x.trim()).filter(Boolean)
    });
    msg.style.color="#9fdf9f";
    msg.textContent="тЬФя╕П рдкреНрд░рд╢реНрдитАУрдЙрддреНрддрд░ рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рд╕реЗрд╡ рд╣реБрдЖ";
    q.value=""; a.value=""; t.value="";
  }catch(e){
    msg.style.color="#ff9f9f";
    msg.textContent="тЭМ рд╕реЗрд╡ рдирд╣реАрдВ рд╣реБрдЖ";
  }
}

async function saveBulk(){
  const msg=document.getElementById("msg2");
  try{
    await KnowledgeBase.init();
    const blocks=bulk.value.split(/\n\s*\n/);
    let count=0;

    for(const b of blocks){
      const q=b.match(/Q:\s*(.+)/i);
      const a=b.match(/A:\s*(.+)/i);
      const t=b.match(/TAGS:\s*(.+)/i);
      if(q && a){
        await KnowledgeBase.saveOne({
          question:q[1].trim(),
          answer:a[1].trim(),
          tags: t ? t[1].split(",").map(x=>x.trim()) : []
        });
        count++;
      }
    }
    msg.style.color="#9fdf9f";
    msg.textContent=`тЬФя╕П ${count} рдкреНрд░рд╢реНрди рд╕реЗрд╡ рд╣реБрдП`;
  }catch(e){
    msg.style.color="#ff9f9f";
    msg.textContent="тЭМ Bulk рд╕реЗрд╡ рд╡рд┐рдлрд▓";
  }
}
</script>
  <!-- ================= SINGLE LEARNING BOX ================= -->
<div style="
  max-width:600px;
  margin:20px auto;
  background:#1e1e26;
  padding:18px;
  border-radius:18px;
  color:#eee;
">

  <h2 style="color:#ffb3b3;">ЁЯза рдЕрдВрдЬрд▓реА рдХреЛ рд╕рд┐рдЦрд╛рдПрдБ (Single Q&A)</h2>

  <textarea id="qInput"
    placeholder="рдкреНрд░рд╢реНрди рд▓рд┐рдЦреЗрдВ"
    style="width:100%;min-height:60px;margin-top:8px;
    padding:10px;border-radius:10px;border:1px solid #333;
    background:#121212;color:#fff;">
  </textarea>

  <textarea id="aInput"
    placeholder="рдЙрддреНрддрд░ рд▓рд┐рдЦреЗрдВ"
    style="width:100%;min-height:90px;margin-top:8px;
    padding:10px;border-radius:10px;border:1px solid #333;
    background:#121212;color:#fff;">
  </textarea>

  <input id="tInput"
    placeholder="рдЯреИрдЧ (рдХреЙрдорд╛ рд╕реЗ рдЕрд▓рдЧ рдХрд░реЗрдВ)"
    style="width:100%;margin-top:8px;
    padding:10px;border-radius:10px;border:1px solid #333;
    background:#121212;color:#fff;"
  />

  <button onclick="saveQA()"
    style="
      margin-top:12px;
      padding:12px;
      width:100%;
      border:none;
      border-radius:12px;
      background:#ffb3b3;
      color:#111;
      font-size:15px;
      cursor:pointer;
    ">
    рд╕реЗрд╡ рдХрд░реЗрдВ
  </button>

  <div id="msg"
    style="margin-top:10px;font-size:13px;">
  </div>
</div>

<script>
async function saveQA(){
  const msg = document.getElementById("msg");
  const q = document.getElementById("qInput").value.trim();
  const a = document.getElementById("aInput").value.trim();
  const t = document.getElementById("tInput").value
              .split(",")
              .map(x => x.trim())
              .filter(Boolean);

  if (!q || !a) {
    msg.style.color = "#ff9f9f";
    msg.textContent = "тЭМ рдкреНрд░рд╢реНрди рдФрд░ рдЙрддреНрддрд░ рджреЛрдиреЛрдВ рдЖрд╡рд╢реНрдпрдХ рд╣реИрдВред";
    return;
  }

  try {
    await KnowledgeBase.init();
    await KnowledgeBase.saveOne({
      question: q,
      answer: a,
      tags: t
    });

    msg.style.color = "#9fdf9f";
    msg.textContent = "тЬЕ рдкреНрд░рд╢реНрдитАУрдЙрддреНрддрд░ рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рд╕реЗрд╡ рд╣реЛ рдЧрдпрд╛ред";

    // рд╕рд╛рдл рдХрд░реЗрдВ
    document.getElementById("qInput").value = "";
    document.getElementById("aInput").value = "";
    document.getElementById("tInput").value = "";

  } catch (e) {
    msg.style.color = "#ff9f9f";
    msg.textContent = "тЭМ рд╕реЗрд╡ рдХрд░рдиреЗ рдореЗрдВ рд╕рдорд╕реНрдпрд╛ рдЖрдИред";
  }
}
    </script>

</body>
</html>
